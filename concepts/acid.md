# Требования ACID

**A**tomicity, **C**onsistency, **I**solation, **D**urability (Атомарность, Согласованность, Изоляция, Устойчивость). Набор требований к транзакционной системе, обеспечивающий наиболее надёжную и предсказуемую её работу.

[К оглавлению](../README.md)

## Атомарность (Atomicity)

Никакая транзакция не должна быть зафиксирована в системе частично. Должны быть выполнены все её подоперации, либо не выполнено ни одной.

**Rollback** - если транзакцию не удаётся полностью завершить, результаты всех уже совершенных действий будут отменены и система вернётся во «внешне исходное» состояние — со стороны будет казаться, что транзакции и не было. Cчётчики, индексы и другие внутренние структуры могут измениться, но, если СУБД запрограммирована без ошибок, это не повлияет на внешнее её поведение.

[К оглавлению](../README.md)

## Согласованность (Consistency)

Транзакция, достигающая своего нормального завершения (EOT (End Of Transaction)) и тем самым фиксирующая свои результаты, сохраняет согласованность базы данных. Каждая успешная транзакция фиксирует только допустимые результаты. Это условие является необходимым для поддержки четвёртого свойства (Устойчивость (Durability)).

В ходе выполнения самой транзакции согласованности не требуется: между двумя операциями внутри транзакции может быть промежуточное несогласованное состояние системы, но благодаря требованию изолированности (Изоляция (Isolation)) никаким другим транзакциям эта несогласованность не будет видна. Атомарность гарантирует, что транзакция либо будет полностью завершена, либо ни одна из операций транзакции не будет выполнена. Тем самым эта промежуточная несогласованность является скрытой.

[К оглавлению](../README.md)

## Изоляция (Isolation)

Во время выполнения транзакции параллельные транзакции не должны оказывать влияния на её результат. Изолированность — требование дорогое, поэтому в реальных базах данных существуют режимы, не полностью изолирующие транзакцию (уровни изолированности). Позволяет скрывать изменения, внесенные одной операцией транзакции при возникновении явления race condition (состояние гонки).

Основные способы изоляции:
- Блокировки, когда данные в БД блокируются (строки или таблицы).
- Версионирование, когда при обновлении данных создается новая версия данных и сохраняется старая. Версии не доступны для разработчика - пока создается новая версия данных, остальные клиенты могут считывать старую версию.

[К оглавлению](../README.md)

## Устойчивость, постоянство (Durability)

Независимо от проблем на нижних уровнях (к примеру, обесточивание системы или сбои в оборудовании) изменения, сделанные успешно завершённой транзакцией, должны остаться сохранёнными после возвращения системы в работу. Другими словами, если пользователь получил подтверждение от системы, что транзакция выполнена, он может быть уверен, что сделанные им изменения не будут отменены из-за какого-либо сбоя.

[К оглавлению](../README.md)
