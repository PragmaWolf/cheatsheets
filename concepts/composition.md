**[Концепции, понятия, термины](../README.md#concepts) ::**
# Композиция

Процесс создания сложных функций или объектов путем комбинирования и объединения более простых функций или объектов.

> :thinking: **IMHO**
>
> Общий класс при инициализации так же инициализирует и все необходимые ему дополнительные классы (элементы композиции) в своем конструкторе и хранит их в своих полях. При удалении экземпляра основного класса так же будут удалены и все экземпляры компонентов, инициализированных в нем. 

[К оглавлению](../README.md#concepts)

Композиция удобна, когда мы описываем отношения "имеет".

Вместо того чтобы создавать новую функцию или объект с нуля, мы можем использовать уже существующие функции или объекты и комбинировать их в более сложные структуры.

Используется, чтобы разбить сложную задачу на более простые подзадачи и решать их по отдельности, а затем комбинировать для получения итогового результата. Это позволяет повысить модульность кода, улучшить его читаемость и переиспользуемость.

Позволяет создавать более гибкие и расширяемые системы, так как отдельные компоненты могут быть легко заменены или изменены без влияния на остальной код.

Также помогает избежать дублирования кода, за счет использования одних и тех же компонентов в разных местах.

В объектно-ориентированном программировании композиция - это когда один класс предоставляет другому свой экземпляр частично или полностью. При уничтожении объекта использующего экземпляры других классов так же должны уничтожаться и экземпляры этих классов.

По сути является более жестко связанным вариантом [агрегации](aggregation.md) - тут "части" основного класса зависят от него и существуют пока существует основной класс.

**Плюсы:**
- Композиция позволяет скрыть отношение использования объектов от глаз клиента.
- Делает API использования класса более простым и позволяет перейти от использования одного класса, к другому .

**Минусы:**
- Отношение достаточно жесткое, поскольку один объект должен уметь создавать другой: он должен знать конкретный тип и иметь доступ к функции создания. Композиция не позволяет использовать интерфейсы (без привлечения фабрик) и требует, чтобы класс имел доступ к конструктору другого класса.

**Совет по применению композиции:**
- Когда классы не представляют собой одну предметную область.
- Когда наследник не является корректным подтипом предка.
- Когда код предка полностью или частично не подходит для наследника.

В остальных случаях, возможно, стоит использовать [наследование](inheritance.md).

[К оглавлению](../README.md#concepts)
